<div class="mat-typography">
  <div mat-dialog-title class="d-flex justify-content-between">
    <h2>
      <span *ngIf="!data.isUpdate">Create Request</span
      ><span *ngIf="data.isUpdate">Update Details</span>
    </h2>
    <button mat-icon-button mat-dialog-close><mat-icon>close</mat-icon></button>
  </div>
  <mat-dialog-content>
    <form class="" [formGroup]="userForm">
      <p class="text-danger" *ngIf="errorMsg !== ''">{{ errorMsg }}</p>
      <div class="row">
        <div class="col-6">
          <mat-form-field appearance="outline" class="custom-input">
            <mat-label>Client Name</mat-label>
            <input matInput formControlName="clientName" autocomplete="off" />
            <mat-error>Enter client name</mat-error>
          </mat-form-field>
        </div>
        <div class="col-6">
          <mat-form-field appearance="outline" class="custom-input">
            <mat-label>ZS Requestor</mat-label>
            <input
              matInput
              formControlName="requesterName"
              autocomplete="off"
            />
            <mat-error>Enter client name</mat-error>
          </mat-form-field>
        </div>

        <div class="col-6 form-group">
          <label for="days">Start Date</label>
          <div class="position-relative required">
            <input
              matInput
              [min]="minStartDate"
              [matDatepicker]="accessStartDate"
              id="accessStartDate"
              formControlName="accessStartDate"
              class="form-control transperent"
              placeholder=""
              autocomplete="off"
              disabled
            />
            <div
              class="date-placeholder"
              (click)="accessStartDate.open()"
            ></div>
            <mat-datepicker-toggle
              matSuffix
              [for]="accessStartDate"
            ></mat-datepicker-toggle>
            <mat-datepicker #accessStartDate disabled="false"></mat-datepicker>
            <p
              class="text-danger"
              *ngIf="userForm.controls.accessStartDate.invalid"
            >
              <span
                *ngIf="
                  userForm.controls.accessStartDate.errors.matDatepickerMin
                "
                >Please select startdate as current or greater.</span
              >
            </p>
          </div>
        </div>
        <div class="col-6 form-group">
          <label for="days">End Date</label>
          <div class="position-relative required">
            <input
              matInput
              [min]="userForm.controls.accessStartDate.value || minStartDate"
              [matDatepicker]="accessEndDate"
              id="accessEndDate"
              formControlName="accessEndDate"
              class="form-control transperent"
              placeholder=""
              autocomplete="off"
              disabled
            />
            <div class="date-placeholder" (click)="accessEndDate.open()"></div>
            <mat-datepicker-toggle
              matSuffix
              [for]="accessEndDate"
            ></mat-datepicker-toggle>
            <mat-datepicker #accessEndDate disabled="false"></mat-datepicker>

            <p
              class="text-danger"
              *ngIf="userForm.controls.accessEndDate.invalid"
            >
              <span *ngIf="userForm.controls.accessEndDate.errors.required"
                >Please select end-date</span
              >
              <span
                *ngIf="userForm.controls.accessEndDate.errors.matDatepickerMin"
                >Please select end-date grater then start Date.</span
              >
            </p>
          </div>
        </div>
        <div class="col-12 form-group">
          <mat-form-field
            class="custom-input custom-textarea"
            appearance="outline"
          >
            <mat-label>Access Reason</mat-label>
            <textarea matInput formControlName="accessReason"></textarea>
            <mat-error>Enter access reason</mat-error>
          </mat-form-field>
        </div>
        <div class="col-12 switch-toggle" *ngIf="data.isUpdate">
          <label>Status</label>
          <div class="switch">
            <input
              type="checkbox"
              class="checkbox"
              id="accessStatus"
              formControlName="accessStatus"
            />
            <div class="knobs">
              <span>Unblock</span>
            </div>
            <div class="layer"></div>
          </div>
        </div>
      </div>
      <div
        class="alert alert-info m-0"
        *ngIf="!data.isUpdate && !showSubmitButton"
      >
        <p><b>Please use the below details to access the gallery:</b></p>
        <ul class="m-0">
          <li>
            URL:
            <b
              ><a href="{{ appURL }}" target="_blank">{{ appURL }}</a></b
            >
          </li>
          <li class="pt-2">
            Access Code: <b>{{ generatedAccessCode }}</b>
          </li>
        </ul>
      </div>
    </form>
  </mat-dialog-content>
  <mat-dialog-actions>
    <div class="col-12 form-group text-center pt-4 m-0">
      <button
        class="btn"
        type="submit"
        (click)="onUserSave()"
        *ngIf="showSubmitButton"
      >
        <span *ngIf="!data.isUpdate">Generate Code</span
        ><span *ngIf="data.isUpdate">Update Details</span>
      </button>
    </div>
  </mat-dialog-actions>
</div>
